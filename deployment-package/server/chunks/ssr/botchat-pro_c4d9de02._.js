module.exports=[8057,a=>{"use strict";a.s(["Plus",()=>b],8057);let b=(0,a.i(46832).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},36699,a=>{"use strict";a.s(["Trash2",()=>b],36699);let b=(0,a.i(46832).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},95639,a=>{"use strict";a.s(["Play",()=>b],95639);let b=(0,a.i(46832).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},60609,a=>{"use strict";a.s(["useBot",()=>e,"useBots",()=>d]);var b=a.i(459);let c=new class{baseUrl="/api";async request(a,b={}){let c=`${this.baseUrl}${a}`,d=await fetch(c,{headers:{"Content-Type":"application/json",...b.headers},...b});if(!d.ok)throw Error((await d.json().catch(()=>({}))).error||`HTTP ${d.status}: ${d.statusText}`);return d.json()}async getBots(){return this.request("/bots")}async getBot(a){return this.request(`/bots/${a}`)}async createBot(a){return this.request("/bots",{method:"POST",body:JSON.stringify(a)})}async updateBot(a,b){return this.request(`/bots/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteBot(a){return this.request(`/bots/${a}`,{method:"DELETE"})}async saveBotFlow(a,b,c){return this.updateBot(a,{flows:{nodes:b,edges:c}})}async toggleBotStatus(a,b){return this.updateBot(a,{isActive:b})}async publishBot(a,b){return this.updateBot(a,{isPublished:b})}async connectWhatsApp(a,b,c){return this.updateBot(a,{whatsappPhoneId:b,whatsappToken:c})}async testWhatsAppConnection(a,b){return this.request("/whatsapp/test",{method:"POST",body:JSON.stringify({phoneId:a,token:b})})}async getBotAnalytics(a,b=7){return this.request(`/bots/${a}/analytics?days=${b}`)}async getBotTemplates(){return this.request("/templates")}async createBotFromTemplate(a,b){return this.request("/bots/from-template",{method:"POST",body:JSON.stringify({templateId:a,name:b})})}};function d(){let[a,d]=(0,b.useState)([]),[e,f]=(0,b.useState)(!0),[g,h]=(0,b.useState)(null),i=async()=>{try{f(!0),h(null);let{bots:a}=await c.getBots();d(a)}catch(a){h(a instanceof Error?a.message:"Failed to fetch bots")}finally{f(!1)}},j=async a=>{let{bot:b}=await c.createBot(a);return d(a=>[b,...a]),b},k=async(a,b)=>{let{bot:e}=await c.updateBot(a,b);return d(b=>b.map(b=>b.id===a?e:b)),e},l=async a=>{await c.deleteBot(a),d(b=>b.filter(b=>b.id!==a))},m=async(a,b)=>{await k(a,{isActive:b})};return(0,b.useEffect)(()=>{i()},[]),{bots:a,loading:e,error:g,refetch:i,createBot:j,updateBot:k,deleteBot:l,toggleBotStatus:m}}function e(a){let[d,e]=(0,b.useState)(null),[f,g]=(0,b.useState)(!0),[h,i]=(0,b.useState)(null),j=async()=>{try{g(!0),i(null);let{bot:b}=await c.getBot(a);e(b)}catch(a){i(a instanceof Error?a.message:"Failed to fetch bot")}finally{g(!1)}},k=async b=>{let{bot:d}=await c.updateBot(a,b);return e(d),d},l=async(b,d)=>{let{bot:f}=await c.saveBotFlow(a,b,d);return e(f),f};return(0,b.useEffect)(()=>{a&&j()},[a]),{bot:d,loading:f,error:h,refetch:j,updateBot:k,saveFlow:l}}},49114,a=>{"use strict";a.s(["default",()=>r],49114);var b=a.i(39955),c=a.i(62130),d=a.i(74073),e=a.i(83227),f=a.i(60609),g=a.i(8413),h=a.i(8057),i=a.i(46832);let j=(0,i.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var k=a.i(95639);let l=(0,i.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var m=a.i(36699),n=a.i(59667),o=a.i(43564),p=a.i(3591);let q=(0,i.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function r(){let{data:a}=(0,c.useSession)(),{bots:i,loading:r,error:s,toggleBotStatus:t,deleteBot:u}=(0,f.useBots)(),v=async a=>{try{let b=i.find(b=>b.id===a);b&&await t(a,!b.isActive)}catch(a){alert("Fehler beim Ändern des Workflow-Status: "+(a instanceof Error?a.message:"Unbekannter Fehler"))}},w=async a=>{if(confirm("Sind Sie sicher, dass Sie diesen Workflow löschen möchten?"))try{await u(a)}catch(a){alert("Fehler beim Löschen des Workflows: "+(a instanceof Error?a.message:"Unbekannter Fehler"))}};return r?(0,b.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Lade Workflows..."})]}):s?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsxs)("p",{className:"text-red-600 mb-4",children:["Fehler beim Laden der Workflows: ",s]}),(0,b.jsx)(e.Button,{onClick:()=>window.location.reload(),children:"Erneut versuchen"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Meine Workflows"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Verwalten Sie Ihre intelligenten Workflows und deren Performance"})]}),(0,b.jsxs)("div",{className:"flex space-x-3",children:[(0,b.jsxs)(e.Button,{variant:"outline",children:[(0,b.jsx)(q,{className:"mr-2 h-4 w-4"}),"Workflow importieren"]}),(0,b.jsx)(e.Button,{asChild:!0,className:"bg-amber-600 hover:bg-amber-700",children:(0,b.jsxs)(d.default,{href:"/dashboard/bots/new",children:[(0,b.jsx)(h.Plus,{className:"mr-2 h-4 w-4"}),"Neuen Workflow erstellen"]})})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-4",children:[(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(g.Wrench,{className:"h-5 w-5 text-amber-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Aktive Workflows"})]}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:i.filter(a=>a.isActive).length})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(n.MessageSquare,{className:"h-5 w-5 text-green-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Nachrichten heute"})]}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:i.reduce((a,b)=>a+(b.stats?.messages||0),0)})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(o.Users,{className:"h-5 w-5 text-purple-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Kontakte"})]}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:i.reduce((a,b)=>a+(b.stats?.contacts||0),0)})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(p.BarChart3,{className:"h-5 w-5 text-orange-600"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Conversions"})]}),(0,b.jsx)("p",{className:"mt-1 text-2xl font-bold text-gray-900",children:i.reduce((a,b)=>a+(b.stats?.conversions||0),0)})]})]}),(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[i.map(a=>(0,b.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)("div",{className:`flex h-10 w-10 items-center justify-center rounded-lg ${a.isActive?"bg-amber-50":"bg-gray-50"}`,children:(0,b.jsx)(g.Wrench,{className:`h-5 w-5 ${a.isActive?"text-amber-600":"text-gray-400"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:a.name}),(0,b.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full border bg-amber-50 text-amber-700 border-amber-200",children:"Workflow"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:`h-2 w-2 rounded-full ${a.isActive?"bg-amber-500":"bg-gray-300"}`}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:a.isActive?"Aktiv":"Inaktiv"})]})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 text-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-bold text-gray-900",children:a.stats?.messages||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Nachrichten"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-bold text-gray-900",children:a.stats?.contacts||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Kontakte"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-lg font-bold text-gray-900",children:a.stats?.conversions||0}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Conversions"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>v(a.id),className:"flex items-center space-x-1",children:a.isActive?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Pausieren"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Play,{className:"h-3 w-3"}),(0,b.jsx)("span",{children:"Starten"})]})}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",asChild:!0,children:(0,b.jsx)(d.default,{href:`/dashboard/bots/${a.id}/edit`,children:(0,b.jsx)(j,{className:"h-3 w-3"})})})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)(e.Button,{size:"sm",variant:"outline",asChild:!0,children:(0,b.jsx)(d.default,{href:`/dashboard/bots/${a.id}/analytics`,children:(0,b.jsx)(p.BarChart3,{className:"h-3 w-3"})})}),(0,b.jsx)(e.Button,{size:"sm",variant:"outline",onClick:()=>w(a.id),className:"text-red-600 hover:text-red-700",children:(0,b.jsx)(m.Trash2,{className:"h-3 w-3"})})]})]}),(0,b.jsxs)("div",{className:"mt-3 text-xs text-gray-400",children:["Zuletzt bearbeitet: ",new Date(a.updatedAt).toLocaleDateString("de-DE")]})]},a.id)),(0,b.jsx)(d.default,{href:"/dashboard/bots/new",className:"rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 p-6 hover:border-amber-400 hover:bg-amber-50 transition-colors",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(h.Plus,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Neuen Workflow erstellen"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Erschaffen Sie mit einer Vorlage oder von Grund auf neu"})]})})]})]})}}];

//# sourceMappingURL=botchat-pro_c4d9de02._.js.map