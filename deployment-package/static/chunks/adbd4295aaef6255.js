(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72521,e=>{"use strict";e.s(["Calendar",()=>t],72521);let t=(0,e.i(22175).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},86060,e=>{"use strict";e.s(["TrendingUp",()=>t],86060);let t=(0,e.i(22175).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},59577,e=>{"use strict";e.s(["Clock",()=>t],59577);let t=(0,e.i(22175).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},59174,e=>{"use strict";e.s(["StatsCard",()=>a]);var t=e.i(47901),s=e.i(30072);function a(e){let{title:a,value:r,change:n,changeType:i="neutral",icon:l,description:c}=e;return(0,t.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-50",children:(0,t.jsx)(l,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:r})]})]}),n&&(0,t.jsx)("div",{className:(0,s.cn)("flex items-center space-x-1 text-sm font-medium","positive"===i&&"text-green-600","negative"===i&&"text-red-600","neutral"===i&&"text-gray-500"),children:(0,t.jsx)("span",{children:n})})]}),c&&(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:c})]})}},78153,e=>{"use strict";e.s(["useBot",()=>r,"useBots",()=>a],78153);var t=e.i(7788);let s=new class{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(this.baseUrl).concat(e),a=await fetch(s,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!a.ok)throw Error((await a.json().catch(()=>({}))).error||"HTTP ".concat(a.status,": ").concat(a.statusText));return a.json()}async getBots(){return this.request("/bots")}async getBot(e){return this.request("/bots/".concat(e))}async createBot(e){return this.request("/bots",{method:"POST",body:JSON.stringify(e)})}async updateBot(e,t){return this.request("/bots/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteBot(e){return this.request("/bots/".concat(e),{method:"DELETE"})}async saveBotFlow(e,t,s){return this.updateBot(e,{flows:{nodes:t,edges:s}})}async toggleBotStatus(e,t){return this.updateBot(e,{isActive:t})}async publishBot(e,t){return this.updateBot(e,{isPublished:t})}async connectWhatsApp(e,t,s){return this.updateBot(e,{whatsappPhoneId:t,whatsappToken:s})}async testWhatsAppConnection(e,t){return this.request("/whatsapp/test",{method:"POST",body:JSON.stringify({phoneId:e,token:t})})}async getBotAnalytics(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return this.request("/bots/".concat(e,"/analytics?days=").concat(t))}async getBotTemplates(){return this.request("/templates")}async createBotFromTemplate(e,t){return this.request("/bots/from-template",{method:"POST",body:JSON.stringify({templateId:e,name:t})})}constructor(){!function(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}(this,"baseUrl","/api")}};function a(){let[e,a]=(0,t.useState)([]),[r,n]=(0,t.useState)(!0),[i,l]=(0,t.useState)(null),c=async()=>{try{n(!0),l(null);let{bots:e}=await s.getBots();a(e)}catch(e){l(e instanceof Error?e.message:"Failed to fetch bots")}finally{n(!1)}},d=async e=>{let{bot:t}=await s.createBot(e);return a(e=>[t,...e]),t},o=async(e,t)=>{let{bot:r}=await s.updateBot(e,t);return a(t=>t.map(t=>t.id===e?r:t)),r},h=async e=>{await s.deleteBot(e),a(t=>t.filter(t=>t.id!==e))},m=async(e,t)=>{await o(e,{isActive:t})};return(0,t.useEffect)(()=>{c()},[]),{bots:e,loading:r,error:i,refetch:c,createBot:d,updateBot:o,deleteBot:h,toggleBotStatus:m}}function r(e){let[a,r]=(0,t.useState)(null),[n,i]=(0,t.useState)(!0),[l,c]=(0,t.useState)(null),d=async()=>{try{i(!0),c(null);let{bot:t}=await s.getBot(e);r(t)}catch(e){c(e instanceof Error?e.message:"Failed to fetch bot")}finally{i(!1)}},o=async t=>{let{bot:a}=await s.updateBot(e,t);return r(a),a},h=async(t,a)=>{let{bot:n}=await s.saveBotFlow(e,t,a);return r(n),n};return(0,t.useEffect)(()=>{e&&d()},[e]),{bot:a,loading:n,error:l,refetch:d,updateBot:o,saveFlow:h}}},99376,e=>{"use strict";e.s(["Bot",()=>t],99376);let t=(0,e.i(22175).default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},74660,e=>{"use strict";e.s(["Download",()=>t],74660);let t=(0,e.i(22175).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},56345,e=>{"use strict";e.s(["default",()=>v],56345);var t=e.i(47901),s=e.i(7788),a=e.i(71745),r=e.i(78153),n=e.i(59174),i=e.i(88978),l=e.i(65306),c=e.i(26791),d=e.i(33471),o=e.i(86060),h=e.i(72521),m=e.i(74660),x=e.i(99376),u=e.i(59577),g=e.i(22175);let p=(0,g.default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),y=(0,g.default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);function v(){let{data:e}=(0,a.useSession)(),{bots:g,loading:v}=(0,r.useBots)(),[b,j]=(0,s.useState)(null),[f,N]=(0,s.useState)("7d"),[w,B]=(0,s.useState)("all");(0,s.useEffect)(()=>{g.length>0&&k()},[g,f,w]);let k=()=>{let e=g.length,t=g.filter(e=>e.isActive).length,s=g.reduce((e,t)=>{var s;return e+((null==(s=t.stats)?void 0:s.messages)||0)},0),a=g.reduce((e,t)=>{var s;return e+((null==(s=t.stats)?void 0:s.contacts)||0)},0);j({overview:{totalBots:e,activeBots:t,totalMessages:s,totalContacts:a,averageResponseTime:2.3,conversionRate:24.5},dailyStats:Array.from({length:7},(e,t)=>{let s=new Date;return s.setDate(s.getDate()-(6-t)),{date:s.toISOString().split("T")[0],messages:Math.floor(50*Math.random())+20,contacts:Math.floor(20*Math.random())+5,conversions:Math.floor(10*Math.random())+2}}),topBots:g.slice(0,3).map(e=>{var t,s;return{id:e.id,name:e.name,messages:(null==(t=e.stats)?void 0:t.messages)||Math.floor(100*Math.random())+20,contacts:(null==(s=e.stats)?void 0:s.contacts)||Math.floor(50*Math.random())+10,responseRate:Math.floor(30*Math.random())+70}}),messageTypes:{text:75,media:20,interactive:5}})};return v?(0,t.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,t.jsx)("span",{className:"ml-2 text-gray-600",children:"Lade Analytics..."})]}):b?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Bot Performance und Benutzer-Insights"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("select",{value:f,onChange:e=>N(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"1d",children:"Letzter Tag"}),(0,t.jsx)("option",{value:"7d",children:"Letzte 7 Tage"}),(0,t.jsx)("option",{value:"30d",children:"Letzter Monat"}),(0,t.jsx)("option",{value:"90d",children:"Letzte 3 Monate"})]}),(0,t.jsxs)("select",{value:w,onChange:e=>B(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"Alle Bots"}),g.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>{if(!b)return;let e=new Blob([[["Datum","Nachrichten","Kontakte","Conversions"],...b.dailyStats.map(e=>[e.date,e.messages.toString(),e.contacts.toString(),e.conversions.toString()])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),s=document.createElement("a");s.style.display="none",s.href=t,s.download="botchat-analytics-".concat(f,".csv"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(t)},children:[(0,t.jsx)(m.Download,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)(n.StatsCard,{title:"Aktive Bots",value:b.overview.activeBots,change:"".concat(b.overview.totalBots," insgesamt"),changeType:"neutral",icon:x.Bot,description:"Bots in Betrieb"}),(0,t.jsx)(n.StatsCard,{title:"Nachrichten heute",value:b.overview.totalMessages,change:"+23%",changeType:"positive",icon:c.MessageSquare,description:"Gesendete & empfangene"}),(0,t.jsx)(n.StatsCard,{title:"Eindeutige Kontakte",value:b.overview.totalContacts,change:"+12 diese Woche",changeType:"positive",icon:d.Users,description:"WhatsApp Kontakte"}),(0,t.jsx)(n.StatsCard,{title:"Conversion Rate",value:"".concat(b.overview.conversionRate,"%"),change:"+5.2%",changeType:"positive",icon:p,description:"Lead zu Kunde"})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)(n.StatsCard,{title:"Ø Antwortzeit",value:"".concat(b.overview.averageResponseTime,"s"),change:"-0.5s",changeType:"positive",icon:u.Clock,description:"Durchschnittliche Bot-Antwortzeit"}),(0,t.jsx)(n.StatsCard,{title:"Bot Verfügbarkeit",value:"99.8%",change:"+0.2%",changeType:"positive",icon:y,description:"Uptime der letzten 30 Tage"})]}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Tägliche Aktivität"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,t.jsx)(h.Calendar,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Letzte 7 Tage"})]})]}),(0,t.jsx)("div",{className:"space-y-3",children:b.dailyStats.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-16 text-xs text-gray-500",children:new Date(e.date).toLocaleDateString("de-DE",{weekday:"short"})}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,t.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.messages/100*100,"%")}})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 w-8",children:e.messages})]})})]},e.date))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Performing Bots"}),(0,t.jsx)("div",{className:"space-y-4",children:b.topBots.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100",children:(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:["#",s+1]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.messages," Nachrichten"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.responseRate,"%"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Antwortrate"})]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Nachrichtentypen"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-blue-50",children:[(0,t.jsx)(c.MessageSquare,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[b.messageTypes.text,"%"]}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Text Nachrichten"})]}),(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-green-50",children:[(0,t.jsx)(y,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:[b.messageTypes.media,"%"]}),(0,t.jsx)("p",{className:"text-sm text-green-700",children:"Media Nachrichten"})]}),(0,t.jsxs)("div",{className:"text-center p-4 rounded-lg bg-purple-50",children:[(0,t.jsx)(o.TrendingUp,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-purple-900",children:[b.messageTypes.interactive,"%"]}),(0,t.jsx)("p",{className:"text-sm text-purple-700",children:"Interaktive Buttons"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Insights"}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-green-200 bg-green-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(o.TrendingUp,{className:"h-5 w-5 text-green-600"}),(0,t.jsx)("span",{className:"font-medium text-green-900",children:"Top Performance"})]}),(0,t.jsx)("p",{className:"text-sm text-green-800",children:"Ihre Bots haben eine überdurchschnittliche Antwortrate von 85%. Besonders der Kundenservice Bot performt sehr gut."})]}),(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-yellow-200 bg-yellow-50",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)(h.Calendar,{className:"h-5 w-5 text-yellow-600"}),(0,t.jsx)("span",{className:"font-medium text-yellow-900",children:"Optimierungsvorschlag"})]}),(0,t.jsx)("p",{className:"text-sm text-yellow-800",children:"Aktivitätsspitzen zwischen 10-12 Uhr und 14-16 Uhr. Erwägen Sie zusätzliche Bot-Kapazitäten in diesen Zeiten."})]})]})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(l.BarChart3,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Daten verfügbar"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Erstellen Sie zunächst einen Bot, um Analytics zu sehen."})]})}}]);